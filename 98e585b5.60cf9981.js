(window.webpackJsonp=window.webpackJsonp||[]).push([[516],{588:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return c})),t.d(n,"metadata",(function(){return l})),t.d(n,"toc",(function(){return s})),t.d(n,"default",(function(){return p}));var o=t(3),i=t(7),r=(t(0),t(915)),a=t(921),c={id:"login-using-keycloak",title:"Login using Keycloak",sidebar_label:"Login using Keycloak",keywords:["OpenHIM","Authentication","Keycloak","OpenID"],description:"Authentication using openID and Keycloak"},l={unversionedId:"how-to/login-using-keycloak",id:"version-8.0.x/how-to/login-using-keycloak",isDocsHomePage:!1,title:"Login using Keycloak",description:"Authentication using openID and Keycloak",source:"@site/versioned_docs/version-8.0.x/how-to/how-to-login-using-keycloak.md",slug:"/how-to/login-using-keycloak",permalink:"/docs/how-to/login-using-keycloak",version:"8.0.x",sidebar_label:"Login using Keycloak",sidebar:"version-8.0.x/docs",previous:{title:"Manually install on Windows",permalink:"/docs/how-to/manually-install-on-windows"}},s=[{value:"SSO authentication using Keycloak",id:"sso-authentication-using-keycloak",children:[{value:"Enabling SSO",id:"enabling-sso",children:[]},{value:"Notes",id:"notes",children:[]}]}],u={toc:s};function p(e){var n=e.components,t=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(o.a)({},u,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"sso-authentication-using-keycloak"},"SSO authentication using Keycloak"),Object(r.b)("p",null,"Follow the steps below to be able to use SSO authentication implemented in both Openhim Console and Openhim Core using Keycloak."),Object(r.b)("h3",{id:"enabling-sso"},"Enabling SSO"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"1. Openhim Console:")),Object(r.b)("p",null,"You need to enable the SSO in the config file ",Object(r.b)("inlineCode",{parentName:"p"},"default.json"),":"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-json"}),'"showLoginForm": true, // This is optional, you can have both authentication\n"ssoEnabled": true,\n"keyCloakUrl": "http://localhost:9088", // Change this to be the Keycloak URL\n"keyCloakRealm": "platform-realm", // Change this to the name of the realm configured in the Keycloak\n"keyCloakClientId": "openhim-oauth" // Change this to the client ID specified in the realm configured in the Keycloak\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"2. Openhim Core:")),Object(r.b)("p",null,"This configuration should be adapted according to your use case."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-json"}),'"api": {\n    "authenicationTypes": ["openid"], // You can enabled other authentication types e.g. ["openid", "local"]\n    "openid": {\n      // Openid connect provider realm url link\n      "url": "http://localhost:9088/realms/platform-realm",\n      // Callback URL used by openid connect provider (should be the same callback URL specified in realm)\n      "callbackUrl": "http://localhost:9000",\n      // CLient ID specified in the realm\n      "clientId": "openhim-oauth",\n      // Client secret specified in the realm\n      "clientSecret": "tZKfEbWf0Ka5HBNZwFrdSyQH2xT1sNMR",\n      // Scopes to be requested from Openid connect provider\n      "scope": "openid email profile offline_access roles"\n    }\n  }\n')),Object(r.b)("img",{alt:"Login With keycloak UI",src:Object(a.a)("img/login-with-keycloak.png")}),Object(r.b)("h3",{id:"notes"},"Notes"),Object(r.b)("p",null,"Clicking on Sign-in with keycloak will redirect you to Keycloak Login UI."),Object(r.b)("img",{alt:"Login With keycloak UI",src:Object(a.a)("img/keycloak-login-ui.png")}),Object(r.b)("p",null,"After entering the Keycloak User credentials and submiting you will be redirected to the dashboard."),Object(r.b)("p",null,"Make sure that Keycloak is on and running to be able to authenticate successfully and that you configured a user with group permissions and details that you need."),Object(r.b)("p",null,"The profile user in Openhim will be the same as the profile configured in Keycloak and you will not be able to edit the essential fields from Openhim for that user."),Object(r.b)("img",{alt:"Login With keycloak UI",src:Object(a.a)("img/keycloak-user-profile.png")}))}p.isMDXComponent=!0},915:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return h}));var o=t(0),i=t.n(o);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,i=function(e,n){if(null==e)return{};var t,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=i.a.createContext({}),u=function(e){var n=i.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},p=function(e){var n=u(e.components);return i.a.createElement(s.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return i.a.createElement(i.a.Fragment,{},n)}},d=i.a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,a=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=u(t),d=o,h=p["".concat(a,".").concat(d)]||p[d]||b[d]||r;return t?i.a.createElement(h,c(c({ref:n},s),{},{components:t})):i.a.createElement(h,c({ref:n},s))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,a=new Array(r);a[0]=d;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,a[1]=c;for(var s=2;s<r;s++)a[s]=t[s];return i.a.createElement.apply(null,a)}return i.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},921:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"a",(function(){return a}));var o=t(23),i=t(922);function r(){const{siteConfig:{baseUrl:e="/",url:n}={}}=Object(o.default)();return{withBaseUrl:(t,o)=>function(e,n,t,{forcePrependBaseUrl:o=!1,absolute:r=!1}={}){if(!t)return t;if(t.startsWith("#"))return t;if(Object(i.b)(t))return t;if(o)return n+t;const a=t.startsWith(n)?t:n+t.replace(/^\//,"");return r?e+a:a}(n,e,t,o)}}function a(e,n={}){const{withBaseUrl:t}=r();return t(e,n)}},922:function(e,n,t){"use strict";function o(e){return!0===/^(\w*:|\/\/)/.test(e)}function i(e){return void 0!==e&&!o(e)}t.d(n,"b",(function(){return o})),t.d(n,"a",(function(){return i}))}}]);