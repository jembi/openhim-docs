<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>
              window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
              ga('create', 'UA-60988221-1', 'auto');
              ga('send', 'pageview');
            </script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<script>
              window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
              ga('create', 'UA-60988221-1', 'auto');
              ga('send', 'pageview');
            </script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"16017120":["/16017120.49d39b29.js"],"17896441":["/17896441.557586ea.js"],"47325611":["/47325611.6adfd503.js"],"50100135":["/50100135.b921d110.js"],"58142228":["/58142228.c4a24b1e.js"],"69039447":["/69039447.6a4f73e2.js"],"72955298":["/72955298.27a61eee.js"],"73754917":["/73754917.17634a4e.js"],"main":["/main.aa1b90a8.js"],"004f7f9e":["/004f7f9e.9b111956.js"],"009f1e98":["/009f1e98.f63e26f7.js"],"026297e9":["/026297e9.54778823.js"],"02ab9906":["/02ab9906.fd0da2d8.js"],"03996ad0":["/03996ad0.f7ff113b.js"],"04a2eb66":["/04a2eb66.948144c9.js"],"06faed75":["/06faed75.4e8a42ba.js"],"06ff312d":["/06ff312d.16cfc220.js"],"077a9381":["/077a9381.333ffecf.js"],"0796a2e6":["/0796a2e6.817093e0.js"],"082a6547":["/082a6547.148eef5b.js"],"083762ca":["/083762ca.fa0cbcf1.js"],"09ce1a73":["/09ce1a73.29b6bb83.js"],"0b1835ba":["/0b1835ba.5548aa0f.js"],"0b4fad2c":["/0b4fad2c.22d93d0b.js"],"0bfedf9f":["/0bfedf9f.7457a02e.js"],"0c9b51c9":["/0c9b51c9.30c0006c.js"],"0ee2d32f":["/0ee2d32f.73ae2230.js"],"0f425520":["/0f425520.4221fecb.js"],"10a07c62":["/10a07c62.c9237bf3.js"],"10a508dd":["/10a508dd.a6b55cc0.js"],"11d04b5f":["/11d04b5f.83372e71.js"],"12852a89":["/12852a89.edce22f8.js"],"1640328c":["/1640328c.2fef7279.js"],"165e6236":["/165e6236.d8805146.js"],"1723e66c":["/1723e66c.76c9fd8b.js"],"178ba0ad":["/178ba0ad.78275871.js"],"1859c817":["/1859c817.67ca09ec.js"],"18b93cb3":["/18b93cb3.d75f533a.js"],"19ca43e5":["/19ca43e5.06ec17cd.js"],"1a24005d":["/1a24005d.6c9199f6.js"],"1afe3348":["/1afe3348.7ae6c025.js"],"1b305ec6":["/1b305ec6.4bc6fa9d.js"],"1b8d92d6":["/1b8d92d6.203e681a.js"],"1be78505":[],"1d697530":["/1d697530.8c2e26ea.js"],"1de1540a":["/1de1540a.1bd469b4.js"],"1ef78522":["/1ef78522.5abff226.js"],"1ff421e5":["/1ff421e5.898d1751.js"],"202e6198":["/202e6198.2ba2df3f.js"],"207bcdda":["/207bcdda.644b6ffc.js"],"20ac7829":["/20ac7829.cddd402f.js"],"233da19a":["/233da19a.4651a3a3.js"],"238f6119":["/238f6119.79390406.js"],"23a9b281":["/23a9b281.99cf6619.js"],"2450005c":["/2450005c.7b40d969.js"],"24bc38f7":["/24bc38f7.49ba94a0.js"],"25fd0e67":["/25fd0e67.435b5c6a.js"],"265802db":["/265802db.d1f1e4f0.js"],"267c5f38":["/267c5f38.7497fa82.js"],"27acf769":["/27acf769.669c4524.js"],"2a2a0c40":["/2a2a0c40.12a5533a.js"],"2a912e67":["/2a912e67.d1d99763.js"],"2c088087":["/2c088087.6ea3f794.js"],"2d120db7":["/2d120db7.d18fd349.js"],"2dd774d6":["/2dd774d6.3e4707b6.js"],"2eeff057":["/2eeff057.b4a4fd55.js"],"32849e0e":["/32849e0e.29810a42.js"],"330adec5":["/330adec5.b2741eab.js"],"3409b469":["/3409b469.6cc46e5a.js"],"359fe6a9":["/359fe6a9.58fa8756.js"],"35b5d9ba":["/35b5d9ba.30edf81e.js"],"368c75cd":["/368c75cd.1d4b1c27.js"],"36d35ffd":["/36d35ffd.90217cd7.js"],"378c50ad":["/378c50ad.5c1fe6ea.js"],"37ceb11f":["/37ceb11f.91aebc29.js"],"3a5c230a":["/3a5c230a.5f71a817.js"],"3b1d4ac1":["/3b1d4ac1.ea90ddd0.js"],"3ba3e546":["/3ba3e546.50e848eb.js"],"3c82e4de":["/3c82e4de.e2619099.js"],"3e23926a":["/3e23926a.08867996.js"],"3e2ad6aa":["/3e2ad6aa.4cc57067.js"],"3f19e1c7":["/3f19e1c7.30a83050.js"],"44c7373d":["/44c7373d.17049b4e.js"],"44f899af":["/44f899af.d7915825.js"],"459e5f5a":["/459e5f5a.e27d7011.js"],"46099f3d":["/46099f3d.f5fe4745.js"],"4794a39c":["/4794a39c.f5a13f5e.js"],"4845355a":["/4845355a.6cf721db.js"],"485ae7c2":["/485ae7c2.7505df12.js"],"4899252d":["/4899252d.150b0fde.js"],"4a94a095":["/4a94a095.0d2757c5.js"],"4bcd5053":["/4bcd5053.e6656298.js"],"4be53141":["/4be53141.ae4f2672.js"],"4c0e3ffa":["/4c0e3ffa.925b47f5.js"],"4c68de30":["/4c68de30.b48eea97.js"],"4dae8d87":["/4dae8d87.a29d1e79.js"],"4f5d5dba":["/4f5d5dba.f9a99365.js"],"4fd51fa0":["/4fd51fa0.6aa10fe8.js"],"53bb393e":["/53bb393e.15e96df3.js"],"55379ea5":["/55379ea5.95fef19f.js"],"563ed162":["/563ed162.cdaf9cc3.js"],"56c5e275":["/56c5e275.2f9373dd.js"],"57a79aee":["/57a79aee.c46b5ac6.js"],"58f03852":["/58f03852.798be0ba.js"],"59811ff6":["/59811ff6.deac2632.js"],"5a8000eb":["/5a8000eb.79b694e8.js"],"5b9e3eb2":["/5b9e3eb2.f21e1769.js"],"5edc8e07":["/5edc8e07.119d46f6.js"],"60b9d055":["/60b9d055.6043821c.js"],"63ad6144":["/63ad6144.94c0f725.js"],"6758b8e1":["/6758b8e1.0bf1e097.js"],"682f37e2":["/682f37e2.b1fda813.js"],"685ce721":["/685ce721.cbcd0b78.js"],"6abc3aba":["/6abc3aba.2d20e59d.js"],"6cf5e099":["/6cf5e099.af598d0c.js"],"6e16b37a":["/6e16b37a.5023dd2a.js"],"6e7e32c9":["/6e7e32c9.2127fb79.js"],"6eb034f5":["/6eb034f5.02922167.js"],"6f98f38e":["/6f98f38e.31f6885e.js"],"70b7a43e":["/70b7a43e.3d42c41c.js"],"70d2285b":["/70d2285b.50ddfb83.js"],"7104fc42":["/7104fc42.613ec42a.js"],"710595e7":["/710595e7.12248c25.js"],"72171f5a":["/72171f5a.23d2ff47.js"],"722162dd":["/722162dd.d8fcd7e8.js"],"745056e3":["/745056e3.4009972c.js"],"75015afe":["/75015afe.2aa89397.js"],"76d58d97":["/76d58d97.ce42c2de.js"],"788b0327":["/788b0327.0d9e0991.js"],"794349dc":["/794349dc.b1d511f8.js"],"7a4bfbae":["/7a4bfbae.1a102807.js"],"7a9a2675":["/7a9a2675.6df2d226.js"],"7afe72df":["/7afe72df.e9232f35.js"],"7b82170f":["/7b82170f.2b3b6333.js"],"7ce07603":["/7ce07603.dffcb710.js"],"7e1ac88a":["/7e1ac88a.f148967f.js"],"7e37206e":["/7e37206e.0b4bfea4.js"],"7e71957c":["/7e71957c.648e4ef3.js"],"7efd278f":["/7efd278f.1e3566f4.js"],"7fa9a6c2":["/7fa9a6c2.18bac931.js"],"7fd6538a":["/7fd6538a.e644f06a.js"],"7fea6da0":["/7fea6da0.59d6bdce.js"],"80d020be":["/80d020be.22de1899.js"],"82872ba3":["/82872ba3.6446809d.js"],"831aa1ae":["/831aa1ae.0c1ff191.js"],"83205c72":["/83205c72.6e068f97.js"],"885f0b73":["/885f0b73.c65dba61.js"],"89641f01":["/89641f01.0b89c9c6.js"],"8982087a":["/8982087a.86a29b50.js"],"8dfe36c2":["/8dfe36c2.ae88f8ca.js"],"8f925644":["/8f925644.11cab051.js"],"90c3a6ff":["/90c3a6ff.352e9483.js"],"90d0d95e":["/90d0d95e.e294fda7.js"],"90da8313":["/90da8313.d24d042b.js"],"92974c77":["/92974c77.af864b0b.js"],"93e7985f":["/93e7985f.272a92b9.js"],"94d59ca5":["/94d59ca5.81b94083.js"],"95f4e73e":["/95f4e73e.4b0d5bcb.js"],"96e3c932":["/96e3c932.74b8ecce.js"],"9733ca5e":["/9733ca5e.4da1e8c4.js"],"980d50b9":["/980d50b9.3bfd7f4a.js"],"99b94910":["/99b94910.1517f43b.js"],"9c491b6a":["/9c491b6a.d97cf8f4.js"],"9e1cf418":["/9e1cf418.4303dc7a.js"],"9e8eb6f8":["/9e8eb6f8.6dadfc24.js"],"9ec42072":["/9ec42072.4bfa6ffa.js"],"a023331e":["/a023331e.f3d4e291.js"],"a435225f":["/a435225f.b2a41a4d.js"],"a7861818":["/a7861818.f1171604.js"],"a7eed7e3":["/a7eed7e3.03c0d832.js"],"a8382ea3":["/a8382ea3.bf4cff71.js"],"a8771adf":["/a8771adf.7f8f0375.js"],"a8ebb849":["/a8ebb849.e1ed2357.js"],"a9cce560":["/a9cce560.59f52eae.js"],"aa7b73b2":["/aa7b73b2.a9c336fb.js"],"aafd777c":["/aafd777c.216e04ee.js"],"ac07380c":["/ac07380c.52a777e3.js"],"ade17812":["/ade17812.6cfe2c5f.js"],"b0cda2e9":["/b0cda2e9.ef2099ed.js"],"b14ee6fe":["/b14ee6fe.a3bb4222.js"],"b4641276":["/b4641276.63d5ccf1.js"],"b4f53ae0":["/b4f53ae0.c2d1d6d8.js"],"b74465a8":["/b74465a8.d5a58381.js"],"b7b717df":["/b7b717df.4171f3f0.js"],"b8351c5c":["/b8351c5c.a85d5175.js"],"b94edf82":["/b94edf82.23c21dbe.js"],"ba58dd52":["/ba58dd52.334ef4a5.js"],"baa1441d":["/baa1441d.4e5d6e54.js"],"bd7986ae":["/bd7986ae.8800a94b.js"],"bdff3492":["/bdff3492.78112837.js"],"c0fac2ef":["/c0fac2ef.21bf699f.js"],"c3707476":["/c3707476.52e8a13d.js"],"c3aa9be6":["/c3aa9be6.ab47dfb3.js"],"c49c0e4d":["/c49c0e4d.52366e21.js"],"c4f5d8e4":["/c4f5d8e4.4395f8f2.js"],"c6c6e257":["/c6c6e257.cad6be7c.js"],"c744acf1":["/c744acf1.5ddcb8ab.js"],"c814305f":["/c814305f.6b29cde0.js"],"c85a0556":["/c85a0556.63e7c411.js"],"c8d81af2":["/c8d81af2.3e129dca.js"],"cadca38b":["/cadca38b.17ac14cc.js"],"cbbc5659":["/cbbc5659.e8d378c5.js"],"cc6a6b6a":["/cc6a6b6a.472aa9a7.js"],"cd63a75e":["/cd63a75e.68746555.js"],"cdca1ee7":["/cdca1ee7.8b2fbc41.js"],"cf94a3a3":["/cf94a3a3.1f76d342.js"],"d1ac8ded":["/d1ac8ded.55da5af9.js"],"d2218bad":["/d2218bad.30c04343.js"],"d28bed82":["/d28bed82.1d3764bf.js"],"d2e619c4":["/d2e619c4.f5311a16.js"],"d45aaf0b":["/d45aaf0b.871b7fc5.js"],"d5b6e4a9":["/d5b6e4a9.b1f7c048.js"],"d5e44f4e":["/d5e44f4e.cca837e7.js"],"d6928e2b":["/d6928e2b.e083b258.js"],"d6ff9673":["/d6ff9673.ff18d58d.js"],"d9e5385b":["/d9e5385b.d41e5360.js"],"dab943a4":["/dab943a4.c5db2979.js"],"dbab5bc6":["/dbab5bc6.27a18df1.js"],"de3a15eb":["/de3a15eb.f02e222b.js"],"de445c44":["/de445c44.130de0ad.js"],"e052be35":["/e052be35.ba53b2e3.js"],"e08885e5":["/e08885e5.c401a177.js"],"e0edcde2":["/e0edcde2.bc78e754.js"],"e0f0a3b5":["/e0f0a3b5.8cd02e3a.js"],"e4400d80":["/e4400d80.c0b8b941.js"],"e77af92e":["/e77af92e.ff583101.js"],"ed48c118":["/ed48c118.696cfe81.js"],"eeba5104":["/eeba5104.b129cdef.js"],"eed5da04":["/eed5da04.c4564f4e.js"],"ef09c99d":["/ef09c99d.b3dcb6f8.js"],"f134d208":["/f134d208.5d148d3b.js"],"f2329db7":["/f2329db7.6fdff8d6.js"],"f3a39a5a":["/f3a39a5a.77b8fbb4.js"],"f3b85bd6":["/f3b85bd6.fb0ae7d3.js"],"f41c61a3":["/f41c61a3.de306c02.js"],"f435b865":["/f435b865.5c94a61d.js"],"f5ffca6d":["/f5ffca6d.2fa96d59.js"],"fbbb8e2d":["/fbbb8e2d.b9a1d85f.js"],"fbd29a1c":["/fbd29a1c.b915a332.js"],"fecabaa4":["/fecabaa4.c1ea3b02.js"],"fef17072":["/fef17072.769193e9.js"]};/*]]>*/</script>

<title data-react-helmet="true">Detailed design using Node.js</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" property="og:title" content="OpenHIM Â· Simplifying Interoperability"/><meta data-react-helmet="true" name="docsearch:version" content="5.2.x"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="description" content="Designing the OpenHIM"/><meta data-react-helmet="true" property="og:description" content="Designing the OpenHIM"/><meta data-react-helmet="true" property="og:url" content="https://jembi.github.io/docs/dev-guide/design-details"/>

<link data-react-helmet="true" rel="shortcut icon" href="/img/openhim_badge.png"/>


<link rel="stylesheet" type="text/css" href="/styles.0795cb8c.css" />

</head>
<body >

<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/openhim-logo-green.svg" alt="OpenHIM"/></a><a class="navbar__item navbar__link" style="white-space:nowrap;padding:0.25rem 0.5rem 0.2rem 0.25rem;font-size:calc(0.9 * var(--ifm-font-size-base));text-decoration:underline" href="/versions">5.2.x</a><a class="navbar__item navbar__link" href="/docs/introduction/about">Docs</a><a class="navbar__item navbar__link" href="/docs/api/introduction/welcome">API</a><a class="navbar__item navbar__link" href="/mediator-library">Mediator Library</a><a class="navbar__item navbar__link" href="/help">Help</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/jembi/openhim-core-js">GitHub</a><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"/></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/openhim-logo-green.svg" alt="OpenHIM"/></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" style="white-space:nowrap;padding:0.25rem 0.5rem 0.2rem 0.25rem;font-size:calc(0.9 * var(--ifm-font-size-base));text-decoration:underline" href="/versions">5.2.x</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/about">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/api/introduction/welcome">API</a></li><li class="menu__list-item"><a class="menu__link" href="/mediator-library">Mediator Library</a></li><li class="menu__list-item"><a class="menu__link" href="/help">Help</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/jembi/openhim-core-js">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/about">About the OpenHIM</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/key-components">Key Components</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/community">Community</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started/prerequisites">Prerequisites</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started/install">Install OpenHIM</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started/configuration">Configuration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/installation/docker">Install via Docker</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installation/npm">Install via NPM</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installation/manual">Install Manually</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installation/console-configuration">Console Configuration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installation/virtual-machine">Install on a Virtual Machine</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/certificates">Certificates</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/channels">Channels</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/clients">Clients</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/contact-list">Contact list</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/import-export">Import/Export</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/mediators">Mediators</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/users">Users</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration/visualizers">Visualizers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial/mediators/basic-scaffold">Scaffold Mediator</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial/mediators/orchestrator">Orchestrator Mediator</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial/mediators/production-scaffold">Scaffold Production Mediator</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">User Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/overview">OpenHIM Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/adding-users">Adding Users</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/transaction-list">Transaction List</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/alerting-reports">Alerting and reports</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/polling-channels">Polling Channels (scheduled tasks)</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/certificates-keystore">Certificates &amp; Keystore</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/mediators">Mediators</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/sample-disaster-recovery-procedure">Sample disaster recovery procedure</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/openhim-core-versioning-and-compatibility">OpenHIM Core versioning and compatibility - OpenHIM - Versioning</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/user-guide/auditing">Auditing</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Developer Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/dev-guide/design-overview">Design overview</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/dev-guide/design-details">Detailed design using Node.js</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dev-guide/openhim-development">Getting started with OpenHIM development</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dev-guide/developing-mediators">Developing mediators</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dev-guide/contributing">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Implementations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/implementations/datim">DATIM</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/implementations/mhero">mHero</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/implementations/momconnect">MomConnect</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/implementations/openhie">OpenHIE</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How to</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/how-to/install-on-centos">Install on CentOS</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/how-to/setup-ssl">Setup SSL</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/how-to/run-openhim-on-startup">Run the OpenHIM on startup</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/how-to/export-import-configuration">Export/import Configuration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/how-to/setup-basic-cluster">Setup a basic cluster</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/how-to/manually-install-on-windows">Manually install on Windows</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><span style="vertical-align:top" class="badge badge--info">Version: <!-- -->5.2.x</span><header><h1 class="docTitle_1vWb">Detailed design using Node.js</h1></header><div class="markdown"><blockquote><p><strong>Note:</strong> this design document was written before the development OpenHIM an as such some of the detail have changed or evolved with the OpenHIM&#x27;s continued development. It is a good starting point but not a complete picture.</p></blockquote><p>Node.js is a good technology option on which to develop the interoperability layer core component for the following reasons:</p><ul><li>Very lightweight</li><li>Robust HTTP library</li><li>Great support from 3rd party libraries for reading and modifying HTTP requests</li><li>Highly performant</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="libraries-to-use"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#libraries-to-use" title="Direct link to heading">#</a>Libraries to use</h2><ul><li><a href="http://koajs.com/">Koa</a> - Koa is a new web application framework for node.js. It provides easy mechanisms to expose web endpoints and process requests and responses in a stack-like approach.</li><li><a href="http://passportjs.org/">Passport.js</a> - Middleware to provide authentication mechanisms (in the current implementation this has not yet been used).</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="general-overview"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#general-overview" title="Direct link to heading">#</a>General Overview</h2><p>The Koa framework provides an easy way to modify HTTP request and responses as they are being processed. Each step that the OpenHIM needs to perform can be written as Koa middleware. Each middleware can handle a different aspect of processing that the OpenHIM need to perform such as authentication, authorization, message persistence and message routing. Developing each of these steps as Koa middleware allows them to be easily reused and allows us to add new steps for future versions. The Koa stack approach to processing requests also fits our use case well as it allows the middleware to affect both the request and the response as it is travelling through the system.</p><p>The Koa framework also gives us some convenience objects, such as <code>ctx.request</code> and <code>ctx.response</code>, that are designed to be used for web applications but they are equally useful for handling web services.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="design"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#design" title="Direct link to heading">#</a>Design</h2><p>The OpenHIM-core uses Koa middleware to act on HTTP requests and Responses. Koa allows you to setup a stack of middleware, each middleware is called in order and gets an opportunity to act on the request (going down the stack) and is then suspended. Once the end of the stack is reached Koa traverses back up the stack allowing each middleware to act on the response.</p><p>Each row in the diagram below represents a middleware component of the OpenHIM-core. Each of the components of the OpenHIM-core will be described further in the following sections. The OpenHIM-core also has a REST API that will allow a web UI to be created for easy of management.</p><img alt="OpenHIM Design" src="/img/design/OpenHIM-js-design.png"/><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="authentication-and-authorization"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#authentication-and-authorization" title="Direct link to heading">#</a>Authentication and Authorization</h2><p>The are two possible combinations of authentication that the interoperability layer(IL) should provide to determine a client&#x27;s identity:</p><ul><li>HTTP basic authentication</li><li>ATNAs Node Authentication (PKI)</li></ul><p>Once identity has been established the IL core component should check if that client has the authority to access the requested service.</p><p>The HIM should also provide a single-sign-on (SSO) facility to allow users of the HIE management application to have a single identity that they may used to access these applications. To do this the HIM should also act as an openid provider and provide functions to manage SSO users.</p><p>The two main workflows that we wish to enable for authentication and authorization are described in the following workflows:</p><ul><li><a href="https://wiki.ohie.org/display/documents/Common+message+security+workflow">Common message security workflow</a></li><li><a href="https://wiki.ohie.org/display/documents/SSO+User+workflow">SSO User workflow</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="authentication"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#authentication" title="Direct link to heading">#</a>Authentication</h3><p>Client details for authentication are stored in the MongoDB database in the following format. Either a password or a certificate (in binary form) is stored in this structure depending on whether the user chooses to use PKI or HTTP basic auth to authenticate clients.</p><p>The OpenHIM application should allow new clients to be added and managed with the following details:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-json codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;clientID&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Musha_OpenMRS&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;domain&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;him.jembi.org&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;OpenMRS Musha instance&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;roles&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;OpenMRS_PoC&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;PoC&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;passwordHash&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;cert&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="basic-auth"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#basic-auth" title="Direct link to heading">#</a>Basic auth</h4><p>When authentication is set to HTTP basic auth, then Koa middleware is setup to intercept the request as soon as it enters the OpenHIM as shown above. This middleware will read client details (username and password-hash) out of the MongoDB store to determine if the client can be authenticated. If the client is rejected an error is returned else the request is considered authenticated and is then passed onto the authorization step.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="public-key-infrastructure-pki---mutual-tls"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#public-key-infrastructure-pki---mutual-tls" title="Direct link to heading">#</a>Public key Infrastructure (PKI) - mutual TLS</h4><p>When the authentication method is set to PKI then the node http server must be setup to use https and it must be set to trust only clients that have a known certificate (stored in a <code>Client</code>&#x27;s details). The domain of a client (identified in its certificate) will be used to map a request received from a client to its details as stored by the OpenHIM (shown above).</p><p>To help perform the authentication the <a href="http://passportjs.org/">passport.js</a> module will be used. This provides us with middleware for a number of different authentication schemes. There is also <a href="https://github.com/rkusa/koa-passport">Koa middleware available for passport</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="authorization"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#authorization" title="Direct link to heading">#</a>Authorization</h3><p>The OpenHIM only performs simple authorisation based on the path that is being requested. It should be able to restrict access to certain paths to clients with particular roles. Roles are identified in each client&#x27;s details. The channel description shown in the router section below shows that each path has one or more allowed roles or clients associated with it. The authorisation component will check if the authenticated client has the authority to access the current path. If authorized the request will be passed on, else, the request will be denied and a HTTP 401 message will be returned.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="message-persistence"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#message-persistence" title="Direct link to heading">#</a>Message persistence</h2><p>Each request and response will be persisted so that it can be logged and so that the erroneous transaction may be re-run. This persistence occurs at two stages. Firstly, once a request is authenticated and authorised. Secondly, once a response has been received from the external service. All the metadata about a transaction is stored in a single document in MongoDB. The relevant sections are just updated as new information is received. The structure of this information is shown below.</p><p>In addition, the ability to store orchestration steps exists in the structure. We anticipate exposing a web service to enable mediators to report requests and responses that they make and receive from external services and have these stored alongside the actual transaction.</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-json codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;_id&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;123&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;status&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Processing|Failed|Completed&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;clientID&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Musha_OpenMRS&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;request&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;path&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;/api/test&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;headers&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;header1&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;value1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;header2&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;value2&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;querystring&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;param1=value1&amp;param2=value2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;body&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;&lt;HTTP body&gt;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;method&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;POST&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;timestamp&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;&lt;ISO 8601&gt;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;response&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;status&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">201</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;body&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;&lt;HTTP body&gt;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;headers&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;header1&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;value1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;header2&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;value2&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;timestamp&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;&lt;ISO 8601&gt;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;routes&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;&lt;route name&gt;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Same structure as above</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;request&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> ... </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;response&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> ... </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;orchestrations&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;&lt;orchestration name&gt;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Same structure as above</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;request&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> ... </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;response&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> ... </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;properties&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// optional meta data about a transaction</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;prop1&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;value1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;prop2&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;value2&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="router"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#router" title="Direct link to heading">#</a>Router</h2><p>The router allows requests to be forwarded to one or more external services (these could be mediators or an actual HIE component). It does this by allowing the user to configure a number of channels. Each channel matches a certain path and contains a number of routes on which to forward requests. Request may be forwarded to multiple routes however, there can only be one <strong>primary route</strong>. The primary route is a the route whose response is returned back to the service requester making use of the OpenHIM.</p><p>Channels may be added, removed or updated dynamically as the application is running.</p><p>A channel may be access controlled via the <code>allow</code> field. This field will specify a list of users or groups that are allowed to send requests to that channel. If a channel receives a request from an un-authorised source it will return an error.</p><p>A custom router will have to be developed that can route according to these rules. The router can be built using the node.js functions provided to make HTTP requests and responses can be relayed using the <code>.pipe()</code> function.</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-json codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Some Registry Channel&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;urlPattern&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;test/sample/.+&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;allow&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;*&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;routes&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">                </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Some Registry&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">                </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;path&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;some/other/path&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// this is optional if left out original path is used</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">                </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;host&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;localhost&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">                </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;port&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;properties&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// optional meta data about a channel</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;prop1&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;value1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;prop2&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;value2&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Some Registry Channel&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;urlPattern&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;test/sample2/.+/test2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;allow&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Alice&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Bob&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;PoC&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;routes&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">                </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Some Registry&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">                </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;host&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;localhost&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">                </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;port&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">                </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;primary&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">                </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Logger&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">                </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;host&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;log-host&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">                </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;port&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4789</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;properties&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// optional meta data about a channel</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;prop1&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;value1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;prop2&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;value2&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="restful-api"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#restful-api" title="Direct link to heading">#</a>Restful API</h2><p>The OpenHIM must also expose a restful API that enables it to be configured and to allow access to the logged transactions. This restful API will drive a web application that can allow the OpenHIM to be configured and will allow transactions to be viewed and monitored.</p><p>The API must supply CRUD access to the following constructs:</p><ul><li>transaction logs</li><li>transaction channels</li><li>client details</li></ul><p>It should also allow for the following actions:</p><ul><li>single and batch re-processing of transactions</li><li>querying for monitoring statistics</li></ul><p>The API reference as it currently exists can be <a href="../api/transactions/overview">found here</a>.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/dev-guide/design-overview"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">Â« <!-- -->Design overview</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/dev-guide/openhim-development"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Getting started with OpenHIM development<!-- --> Â»</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#libraries-to-use" class="contents__link">Libraries to use</a></li><li><a href="#general-overview" class="contents__link">General Overview</a></li><li><a href="#design" class="contents__link">Design</a></li><li><a href="#authentication-and-authorization" class="contents__link">Authentication and Authorization</a><ul class=""><li><a href="#authentication" class="contents__link">Authentication</a></li><li><a href="#authorization" class="contents__link">Authorization</a></li></ul></li><li><a href="#message-persistence" class="contents__link">Message persistence</a></li><li><a href="#router" class="contents__link">Router</a></li><li><a href="#restful-api" class="contents__link">Restful API</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/about">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api/introduction/welcome">API</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://wiki.ohie.org/display/SUB/Interoperability+Layer+Community">OpenHIE</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/channel/UCz3UpAGDJbKG7KkorgMGfEA">YouTube Tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Playgrounds</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://sandbox.openhim.org">OpenHIM 5.2-latest Sandbox</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://alpha.sandbox.openhim.org">OpenHIM 5.3-alpha Sandbox</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://jembi.org" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1Wg7"><img class="footer__logo" alt="Jembi health Systems Logo" src="/img/jembi-logo.png"/></a></div>Copyright Â© 2020 Jembi Health Systems NPC</div></div></footer>
</div>

<script type="text/javascript" src="/styles.2e0f90cf.js"></script>

<script type="text/javascript" src="/runtime~main.08f8a842.js"></script>

<script type="text/javascript" src="/main.aa1b90a8.js"></script>

<script type="text/javascript" src="/2.dd4d181d.js"></script>

<script type="text/javascript" src="/3.7b0aee4b.js"></script>

<script type="text/javascript" src="/247.4f1c8ccc.js"></script>

<script type="text/javascript" src="/20ac7829.cddd402f.js"></script>

<script type="text/javascript" src="/17896441.557586ea.js"></script>

<script type="text/javascript" src="/7afe72df.e9232f35.js"></script>


</body>
</html>